<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>文件系统 :: 我的文档</title>
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">我的文档</a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs-neutralino-api" data-version="0.0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">NeutralinoJS 文档</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">开始</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../index.html">介绍</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/your-first-neutralinojs-app.html">你的第一个应用</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/using-frontend-libraries.html">使用前端库</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">原生API</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="overview.html">API概述</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="app.html">应用程序</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="clipboard.html">剪贴板</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="computer.html">硬件</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="custom.html">自定义</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debug.html">调试</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="events.html">事件</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="extensions.html">拓展</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="filesystem.html">文件系统</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="init.html">初始化</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="os.html">操作系统</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="storage.html">存储</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="updater.html">更新</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="window.html">窗口</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resources.html">资源</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="error-codes.html">错误代码</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="global-variables.html">全局变量</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">命令行</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/neu-cli.html">neu CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/internal-cli-arguments.html">内部 CLI 参数</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">配置</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/neutralino.config.json.html">neutralino.config.json</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/project-structure.html">项目结构</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration/modes.html">模式</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">如何</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to/extensions-overview.html">扩展概述</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to/auto-updater.html">自动更新</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">发布</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../distribution/overview.html">发布概述</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">贡献</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/framework-developer-guide.html">框架开发者指南</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/architecture.html">架构</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/security.html">安全</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/code-style-guide.html">编码风格指南</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/developer-support.html">开发者支持</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/committers.html">提交者</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/frequently-asked-questions.html">常见问题解答</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/about-neutralinojs.html">关于Neutralinojs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">更新日志</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://neutralino.js.org/docs/release-notes/framework">Framework</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://neutralino.js.org/docs/release-notes/cli">CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://neutralino.js.org/docs/release-notes/client-library">Client Library</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">NeutralinoJS 文档</span>
    <span class="version">0.0.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../index.html">NeutralinoJS 文档</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">NeutralinoJS 文档</a></li>
    <li>原生API</li>
    <li><a href="filesystem.html">文件系统</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/qq253498229/docs-neutralino-api/edit/master/modules/ROOT/pages/api/filesystem.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="目录" data-levels="1">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">文件系统</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><code>Neutralino.filesystem</code> 命名空间包含用于处理文件的方法。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemcreatedirectorypath"><a class="anchor" href="#filesystemcreatedirectorypath"></a>创建目录</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.createDirectory(path)</code></p>
</div>
<div class="paragraph">
<p>递归创建一个目录或多个目录。如果目录创建不可能，则抛出 <code>NE_FS_DIRCRER</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters"><a class="anchor" href="#parameters"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>path</code> String：新目录路径。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">await Neutralino.filesystem.createDirectory('./newDirectory');

await Neutralino.filesystem.createDirectory(NL_PATH + '/myFolder/api/fs');</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemremovepath"><a class="anchor" href="#filesystemremovepath"></a>删除对象</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.remove(path)</code></p>
</div>
<div class="paragraph">
<p>移除一个目录或文件。如果给定路径是目录，此函数会递归移除该特定目录的所有内容。如果移除不可能，则抛出 <code>NE_FS_REMVERR</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-1"><a class="anchor" href="#parameters-1"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>path</code> String：目录或文件路径。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">await Neutralino.filesystem.remove('./tmpDirectory');
await Neutralino.filesystem.remove('./tmpFile.txt');</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemwritefilefilename-data"><a class="anchor" href="#filesystemwritefilefilename-data"></a>写入文件</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.writeFile(filename, data)</code></p>
</div>
<div class="paragraph">
<p>写入一个文本文件。如果文件写入出错，则抛出 <code>NE_FS_FILWRER</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-2"><a class="anchor" href="#parameters-2"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> String：文件名。</p>
</li>
<li>
<p><code>data</code> String：文件内容。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">await Neutralino.filesystem.writeFile('./myFile.txt', 'Sample content');</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemappendfilefilename-data"><a class="anchor" href="#filesystemappendfilefilename-data"></a>追加文件内容</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.appendFile(filename, data)</code></p>
</div>
<div class="paragraph">
<p>将文本内容追加到文件。如果文件写入出错，则抛出 <code>NE_FS_FILWRER</code> 异常。如果提供的文件不存在，此函数会创建一个新文件并写入 <code>data</code>。</p>
</div>
<div class="sect2">
<h3 id="parameters-3"><a class="anchor" href="#parameters-3"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> String：文件名。</p>
</li>
<li>
<p><code>data</code> String：要追加的内容。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">await Neutralino.filesystem.appendFile('./myFile.txt', 'Sample ');
await Neutralino.filesystem.appendFile('./myFile.txt', 'content');</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemwritebinaryfilefilename-data"><a class="anchor" href="#filesystemwritebinaryfilefilename-data"></a>写入二进制文件</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.writeBinaryFile(filename, data)</code></p>
</div>
<div class="paragraph">
<p>写入一个二进制文件。如果文件写入出错，则抛出 <code>NE_FS_FILWRER</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-4"><a class="anchor" href="#parameters-4"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> String：文件名。</p>
</li>
<li>
<p><code>data</code> ArrayBuffer：二进制文件内容，以 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">ArrayBuffer</a> 形式表示。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let rawBin = new ArrayBuffer(1);
let view = new Uint8Array(rawBin);
view[0] = 64; // Saves ASCII '@' to the binary file

await Neutralino.filesystem.writeBinaryFile('./myFile.bin', rawBin);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemappendbinaryfilefilename-data"><a class="anchor" href="#filesystemappendbinaryfilefilename-data"></a>追加二进制文件</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.appendBinaryFile(filename, data)</code></p>
</div>
<div class="paragraph">
<p>将二进制数据追加到文件。如果文件写入出错，则抛出 NE_FS_FILWRER 异常。如果提供的文件不存在，此函数会创建一个新文件并写入数据。</p>
</div>
<div class="sect2">
<h3 id="parameters-5"><a class="anchor" href="#parameters-5"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> String：文件名。</p>
</li>
<li>
<p><code>data</code> ArrayBuffer：要追加的二进制内容，以 <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">ArrayBuffer</a></code> 形式表示。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let rawBin = new ArrayBuffer(1);
let view = new Uint8Array(rawBin);
view[0] = 64; // Saves ASCII '@' to the binary file

await Neutralino.filesystem.appendBinaryFile('./myFile.bin', rawBin);
await Neutralino.filesystem.appendBinaryFile('./myFile.bin', rawBin);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemreadfilefilename"><a class="anchor" href="#filesystemreadfilefilename"></a>读取文件</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.readFile(filename)</code></p>
</div>
<div class="paragraph">
<p>读取一个文本文件。如果文件读取出错，则抛出 <code>NE_FS_FILRDER</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-6"><a class="anchor" href="#parameters-6"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> String：文件名。</p>
</li>
<li>
<p><code>pos</code> Number（可选）：文件光标位置，以字节为单位。</p>
</li>
<li>
<p><code>size</code> Number（可选）：文件读取缓冲区大小，以字节为单位。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-string-awaited"><a class="anchor" href="#return-string-awaited"></a>返回 String（异步等待）：</h3>
<div class="paragraph">
<p>文件内容。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let data = await Neutralino.filesystem.readFile('./myFile.txt');
console.log(`Content: ${data}`);

let data = await Neutralino.filesystem.readFile('./myFile.txt', {
    pos: 2,
    size: 10
});
console.log(`Content: ${data}`);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemreadbinaryfilefilename-options"><a class="anchor" href="#filesystemreadbinaryfilefilename-options"></a>读取二进制文件</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.readBinaryFile(filename, options)</code></p>
</div>
<div class="paragraph">
<p>读取二进制文件。如果文件读取出错，则抛出 <code>NE_FS_FILRDER</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-7"><a class="anchor" href="#parameters-7"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> String：文件名。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="options"><a class="anchor" href="#options"></a>选项</h3>
<div class="ulist">
<ul>
<li>
<p><code>pos</code> Number（可选）：文件光标位置，以字节为单位。</p>
</li>
<li>
<p><code>size</code> Number（可选）：文件读取缓冲区大小，以字节为单位。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-object-awaited"><a class="anchor" href="#return-object-awaited"></a>返回 Object（异步等待）：</h3>
<div class="paragraph">
<p>二进制文件内容，以 <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">ArrayBuffer</a></code> 形式表示。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let data = await Neutralino.filesystem.readBinaryFile('./myFile.bin');
let view = new Uint8Array(data);

console.log('Binary content: ', view);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemopenfilefilename"><a class="anchor" href="#filesystemopenfilefilename"></a>打开文件流</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.openFile(filename)</code></p>
</div>
<div class="paragraph">
<p>创建一个可读文件流。如果文件打开出错，则抛出 <code>NE_FS_FILOPER</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-8"><a class="anchor" href="#parameters-8"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> String：文件名。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-number-awaited"><a class="anchor" href="#return-number-awaited"></a>返回 Number（异步等待）：</h3>
<div class="paragraph">
<p>文件流标识符。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let fileId = await Neutralino.filesystem.openFile('./myFile.txt');
console.log(`ID: ${fileId}`);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemupdateopenedfileid-action-data"><a class="anchor" href="#filesystemupdateopenedfileid-action-data"></a>更新文件流</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.updateOpenedFile(id, action, data)</code></p>
</div>
<div class="paragraph">
<p>调用文件流操作。如果框架无法更新流，则抛出 <code>NE_FS_UNLTOUP</code> 异常。调用此方法来读取和定位打开的文件（即一个可读流）。</p>
</div>
<div class="sect2">
<h3 id="parameters-9"><a class="anchor" href="#parameters-9"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>id</code> Number：文件流标识符。</p>
</li>
<li>
<p><code>action</code> String：要执行的操作。仅接受以下值：</p>
<div class="ulist">
<ul>
<li>
<p><code>read</code>：从文件流中读取一段字节。</p>
</li>
<li>
<p><code>readBinary</code>：与 <code>read</code> 行为相同，但使用二进制读取模式。</p>
</li>
<li>
<p><code>readAll</code>：触发 <code>read</code> 操作，直到文件流光标位置到达 <code><a href="https://en.wikipedia.org/wiki/End-of-file">EOF</a></code>。</p>
</li>
<li>
<p><code>readAllBinary</code>：与 <code>readAll</code> 行为相同，但使用二进制读取模式。</p>
</li>
<li>
<p><code>seek</code>：设置文件光标位置。</p>
</li>
<li>
<p><code>close</code>：关闭并释放文件处理器资源。</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>data</code> Object（可选）：<code>action</code>的额外数据。如果<code>action</code>是 <code>read</code>、<code>readBinary</code>、<code>readAll</code> 或 <code>readAllBinary</code>，则发送缓冲区大小，以字节为单位（默认：256 字节）。如果操作是 <code>seek</code>，则发送文件流光标位置。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let fileId = await Neutralino.filesystem.openFile('./myFile.txt');

let content = '';
Neutralino.events.on('openedFile', (evt) =&gt; {
  if(evt.detail.id == fileId) {
    switch(evt.detail.action) {
      case 'data':
        content += evt.detail.data;
        break;
      case 'end':
        console.log(content);
        break;
    }
  }
});

// Sets the file stream cursor to 10th byte
await Neutralino.filesystem.updateOpenedFile(fileId, 'seek', 10);
// Reads 2 bytes from the cursor position
await Neutralino.filesystem.updateOpenedFile(fileId, 'read', 2);
// Reads the next bytes until the cursor reaches EOF (buffer size: 2)
await Neutralino.filesystem.updateOpenedFile(fileId, 'readAll', 2);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemgetopenedfileinfoid"><a class="anchor" href="#filesystemgetopenedfileinfoid"></a>获取文件流信息</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.getOpenedFileInfo(id)</code></p>
</div>
<div class="paragraph">
<p>返回文件流详细信息。如果文件流标识符无效，则抛出 <code>NE_FS_UNLTFOP</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-10"><a class="anchor" href="#parameters-10"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>id</code> Number：文件流标识符。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-object-awaited-1"><a class="anchor" href="#return-object-awaited-1"></a>返回 Object（异步等待）：</h3>
<div class="ulist">
<ul>
<li>
<p><code>id</code> Number：文件流标识符。</p>
</li>
<li>
<p><code>eof</code> Boolean：如果流到达 EOF，则为 true。</p>
</li>
<li>
<p><code>pos</code> Number：文件流光标位置。</p>
</li>
<li>
<p><code>lastRead</code> Number：上次读取的字节数。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let info = await Neutralino.filesystem.getOpenedFileInfo(0);
console.log(info);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemcreatewatcherpath"><a class="anchor" href="#filesystemcreatewatcherpath"></a>创建文件监听</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.createWatcher(path)</code></p>
</div>
<div class="paragraph">
<p>创建一个文件系统监视器。如果监视器创建失败，则抛出 <code>NE_FS_UNLCWAT</code> 异常。如果给定路径已存在一个活动的监视器，此函数会返回现有的监视器标识符。</p>
</div>
<div class="sect2">
<h3 id="parameters-11"><a class="anchor" href="#parameters-11"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>path</code> String：目录路径。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-number-awaited-1"><a class="anchor" href="#return-number-awaited-1"></a>返回 Number（异步等待）：</h3>
<div class="paragraph">
<p>文件监视器标识符。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let watcherId = await Neutralino.filesystem.createWatcher(NL_PATH);
Neutralino.events.on('watchFile', (evt) =&gt; {
    if(watcherId == evt.detail.id) {
        console.log(evt.detail);
    }
});
console.log(`ID: ${watcherId}`);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemremovewatcherwatcherid"><a class="anchor" href="#filesystemremovewatcherwatcherid"></a>移除文件监听</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.removeWatcher(watcherId)</code></p>
</div>
<div class="paragraph">
<p>移除一个文件系统监视器。如果监视器移除失败，则抛出 <code>NE_FS_NOWATID</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-12"><a class="anchor" href="#parameters-12"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>watcherId</code> Number：文件监视器标识符。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-number-awaited-2"><a class="anchor" href="#return-number-awaited-2"></a>返回 Number（异步等待）：</h3>
<div class="paragraph">
<p>文件监视器标识符。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let watcherId = await Neutralino.filesystem.createWatcher(NL_PATH);
console.log(`ID: ${watcherId}`);
await Neutralino.filesystem.removeWatcher(watcherId);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemgetwatchers"><a class="anchor" href="#filesystemgetwatchers"></a>获取监听信息</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.getWatchers()</code></p>
</div>
<div class="paragraph">
<p>返回创建的文件监视器的信息。</p>
</div>
<div class="sect2">
<h3 id="return-object-awaited-2"><a class="anchor" href="#return-object-awaited-2"></a>返回 Object（异步等待）：</h3>
<div class="paragraph">
<p>一个 <code>FileWatcher</code> 对象数组。</p>
</div>
</div>
<div class="sect2">
<h3 id="filewatcher"><a class="anchor" href="#filewatcher"></a>FileWatcher</h3>
<div class="ulist">
<ul>
<li>
<p><code>id</code> Number：监视器标识符。</p>
</li>
<li>
<p><code>path</code> String：文件监视器路径。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let watchers = await Neutralino.filesystem.getWatchers();
for(let watcher of watchers) {
    console.log(watcher);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemreaddirectorypath-options"><a class="anchor" href="#filesystemreaddirectorypath-options"></a>读取目录内容</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.readDirectory(path, options)</code></p>
</div>
<div class="paragraph">
<p>读取目录内容。如果路径不存在，则抛出 <code>NE_FS_NOPATHE</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-13"><a class="anchor" href="#parameters-13"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>path</code> String：文件/目录路径。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="options-1"><a class="anchor" href="#options-1"></a>选项</h3>
<div class="ulist">
<ul>
<li>
<p><code>recursive</code> Boolean：递归读取子目录。默认值为 false。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-object-awaited-3"><a class="anchor" href="#return-object-awaited-3"></a>返回 Object（异步等待）：</h3>
<div class="paragraph">
<p>一个 <code>DirectoryEntry</code> 对象数组。</p>
</div>
</div>
<div class="sect2">
<h3 id="directoryentry"><a class="anchor" href="#directoryentry"></a>DirectoryEntry</h3>
<div class="ulist">
<ul>
<li>
<p><code>entry</code> String：文件名。</p>
</li>
<li>
<p><code>type</code> String：条目类型（<code>FILE</code> 或 <code>DIRECTORY</code>）。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let entries = await Neutralino.filesystem.readDirectory(NL_PATH);
console.log('Content: ', entries);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemcopysource-destination"><a class="anchor" href="#filesystemcopysource-destination"></a>复制对象</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.copy(source, destination)</code></p>
</div>
<div class="paragraph">
<p>将文件或目录复制到新位置。如果系统无法复制路径，则抛出 <code>NE_FS_COPYERR</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-14"><a class="anchor" href="#parameters-14"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>source</code> String：源路径。</p>
</li>
<li>
<p><code>destination</code> String：目标路径。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="options-2"><a class="anchor" href="#options-2"></a>选项</h3>
<div class="ulist">
<ul>
<li>
<p><code>recursive</code> Boolean：递归复制子目录。默认值为 <code>true</code>。</p>
</li>
<li>
<p><code>overwrite</code> Boolean：用同名现有文件覆盖。默认值为 <code>true</code>。</p>
</li>
<li>
<p><code>skip</code> Boolean：跳过同名现有文件。默认值为 <code>false</code>。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">await Neutralino.filesystem.copy('./source.txt', './destination.txt');
await Neutralino.filesystem.copy('./myDir', './myDirCopy');</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemmovesource-destination"><a class="anchor" href="#filesystemmovesource-destination"></a>移动对象</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.move(source, destination)</code></p>
</div>
<div class="paragraph">
<p>将文件或目录移动到新位置。如果系统无法重命名路径，则抛出 <code>NE_FS_MOVEERR</code> 异常。</p>
</div>
<div class="sect2">
<h3 id="parameters-15"><a class="anchor" href="#parameters-15"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>source</code> String：源路径。</p>
</li>
<li>
<p><code>destination</code> String：目标路径。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">await Neutralino.filesystem.move('./source.txt', './destination.txt');
await Neutralino.filesystem.move('./myDir', './myFolder');</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemgetstatspath"><a class="anchor" href="#filesystemgetstatspath"></a>获取文件信息</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.getStats(path)</code></p>
</div>
<div class="paragraph">
<p>返回给定路径的文件统计信息。如果给定路径不存在或无法访问，则抛出 <code>NE_FS_NOPATHE</code> 异常。因此，你可以使用此方法检查文件或目录是否存在。</p>
</div>
<div class="sect2">
<h3 id="parameters-16"><a class="anchor" href="#parameters-16"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>path</code> String：文件或目录路径。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-object-awaited-4"><a class="anchor" href="#return-object-awaited-4"></a>返回 Object（异步等待）：</h3>
<div class="ulist">
<ul>
<li>
<p><code>size</code> Number：大小，以字节为单位。</p>
</li>
<li>
<p><code>isFile</code> Boolean：如果路径表示普通文件，则为 <code>true</code>。</p>
</li>
<li>
<p><code>isDirectory</code> Boolean：如果路径表示目录，则为 <code>true</code>。</p>
</li>
<li>
<p><code>createdAt</code> Number：在 Windows 上，返回文件创建时间的 Unix 毫秒数 — 在 Unix 或类 Unix 平台上，返回最后一次 <code><a href="https://en.wikipedia.org/wiki/Inode">inode</a></code> 修改时间的 Unix 毫秒数。</p>
</li>
<li>
<p><code>modifiedAt</code> Number：最后一次文件修改时间的 Unix 毫秒数。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let stats = await Neutralino.filesystem.getStats('./sampleVideo.mp4');
console.log('Stats:', stats);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemgetabsolutepathpath"><a class="anchor" href="#filesystemgetabsolutepathpath"></a>获取绝对路径</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.getAbsolutePath(path)</code></p>
</div>
<div class="paragraph">
<p>返回给定路径的绝对路径。此函数适用于系统中不存在的路径。</p>
</div>
<div class="sect2">
<h3 id="parameters-17"><a class="anchor" href="#parameters-17"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>path</code> String：路径。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-string-awaited-1"><a class="anchor" href="#return-string-awaited-1"></a>返回 String（异步等待）：</h3>
<div class="paragraph">
<p>绝对路径。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let path = await Neutralino.filesystem.getAbsolutePath('./myFolder');
console.log(path);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemgetrelativepathpath-base"><a class="anchor" href="#filesystemgetrelativepathpath-base"></a>获取相对路径</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.getRelativePath(path, base)</code></p>
</div>
<div class="paragraph">
<p>返回给定路径和基准路径的相对路径。此函数适用于系统中不存在的路径。</p>
</div>
<div class="sect2">
<h3 id="parameters-18"><a class="anchor" href="#parameters-18"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>path</code> String：路径。</p>
</li>
<li>
<p><code>base</code> String（可选）：用于与 <code>path</code> 参数一起计算相对路径的基准路径。如果未提供此参数，则默认使用 <code><a href="global-variables.html#predefined-global-variables" class="xref page">NL_CWD</a></code>。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-string-awaited-2"><a class="anchor" href="#return-string-awaited-2"></a>返回 String（异步等待）：</h3>
<div class="paragraph">
<p>相对路径。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let path = await Neutralino.filesystem.getRelativePath('./myFolder');
console.log(path);

path = await Neutralino.filesystem.getRelativePath('./myFolder', '/home/user');
console.log(path);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filesystemgetpathpartspath"><a class="anchor" href="#filesystemgetpathpartspath"></a>解析路径</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>filesystem.getPathParts(path)</code></p>
</div>
<div class="paragraph">
<p>解析给定路径并返回其组成部分。</p>
</div>
<div class="sect2">
<h3 id="parameters-19"><a class="anchor" href="#parameters-19"></a>参数</h3>
<div class="ulist">
<ul>
<li>
<p><code>path</code> String：路径。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="return-object-awaited-5"><a class="anchor" href="#return-object-awaited-5"></a>返回 Object（异步等待）：</h3>
<div class="ulist">
<ul>
<li>
<p><code>rootName</code> String：根路径名称。</p>
</li>
<li>
<p><code>rootDirectory</code> String：根路径目录。</p>
</li>
<li>
<p><code>rootPath</code> String：根路径。</p>
</li>
<li>
<p><code>relativePath</code> String：相对于根路径的路径。</p>
</li>
<li>
<p><code>parentPath</code> String：父路径或不含文件名的目录路径。</p>
</li>
<li>
<p><code>filename</code> String：文件名。</p>
</li>
<li>
<p><code>extension</code> String：文件扩展名。</p>
</li>
<li>
<p><code>stem</code> String：不含扩展名的文件名部分。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">let pathParts = await Neutralino.filesystem.getPathParts('./myFolder/myFile.txt');
console.log('Parts:', pathParts);</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
